---
description: Create a new agent skill following the AgentSkills.io specification
alwaysApply: false
---
# Create Skill

Create agent skills following the [AgentSkills.io](https://agentskills.io/specification) specification. Skills use **verb form** naming (e.g., `format-code`, `create-skill`). Agents use **noun form** (e.g., `code-formatter`, `skill-creator`).

## AgentSkills.io Skill Structure

A skill is a directory containing a `SKILL.md` file with optional supporting directories:

```
skill-name/
├── SKILL.md          # Required: YAML frontmatter + markdown instructions
├── scripts/          # Optional: executable code agents can run
├── references/       # Optional: additional documentation loaded on demand
└── assets/           # Optional: templates, images, data files
```

### Frontmatter Schema

```yaml
---
name: skill-name          # Required: 1-64 chars, lowercase + hyphens, must match directory name
description: ...          # Required: 1-1024 chars, what it does and when to use it
license: Apache-2.0       # Optional
compatibility: ...        # Optional: 1-500 chars, environment requirements
metadata:                 # Optional: arbitrary key-value pairs
  author: org-name
  version: "1.0"
allowed-tools: Bash Read  # Optional: space-delimited pre-approved tools (experimental)
---
```

NameValidation {
  length: 1-64 characters
  charset: lowercase alphanumeric + hyphens (a-z, 0-9, -)
  no leading or trailing hyphens
  no consecutive hyphens (--)
  must match parent directory name
}

### Progressive Disclosure

Metadata (~100 tokens) => loaded at startup for all skills
Instructions (< 5000 tokens) => loaded when skill is activated
Resources (as needed) => loaded only when required

## Syntax Reference

Read `ai/rules/sudolang/sudolang-syntax.mdc` for SudoLang conventions. Use markdown and natural language primarily. Employ SudoLang for interfaces and function composition where token efficiency matters. Favor symbolic code (JavaScript) over AI inference for deterministic operations.

## Process

createSkill(userRequest) {
  1. Gather Requirements - ask clarifying questions about the skill's purpose, inputs, outputs, and constraints
  2. Discover Related Skills - scan `ai/` and `aidd-custom/` for existing skills that overlap or could be leveraged
  3. Research Best Practices - use web search to find best practices for the skill topic
  4. Name the skill using verb form and NameValidation rules
  5. Plan - draft a skill plan incorporating research and related skill analysis
  6. Present Plan - show the plan to the user and ask if any changes are required before proceeding
  7. Draft the SKILL.md following the AgentSkills.io spec
  8. Write the skill to `$projectRoot/aidd-custom/${skillName}/SKILL.md`
  9. Validate with `skills-ref validate` and the symbolic size checker
  10. Report size metrics and validation results to the user
}

## Discover Related Skills

discoverRelatedSkills(skillTopic) {
  searchPaths = ["$projectRoot/ai/", "$projectRoot/aidd-custom/"]
  for each (path in searchPaths) {
    scan for SKILL.md, .mdc, and .md files
    read frontmatter descriptions
    identify skills with overlapping purpose or complementary functionality
  }
  report:
    - Related skills found and their purpose
    - How existing skills can be leveraged or composed with the new skill
    - Potential overlap to avoid duplication
}

## Research Best Practices

researchTopic(skillTopic) {
  use web search to find best practices, patterns, and conventions for $skillTopic
  summarize key findings relevant to skill authoring
  incorporate findings into the skill plan
}

## Plan Presentation

presentPlan(skillPlan) {
  show the user:
    - Skill name and purpose
    - Related skills discovered and how they will be leveraged
    - Best practices found via research
    - Proposed SKILL.md structure and sections
    - Whether scripts/, references/, or assets/ directories are needed
    - Any size concerns
  ask the user if any changes are required before proceeding
  await explicit user approval
}

## Validation

After creating the skill, run validation and report size metrics:

```javascript
// 1. Run: skills-ref validate ./path-to-skill-directory
// 2. Then compute and report size metrics:

const fs = require("fs");
const path = require("path");
const skillMd = fs.readFileSync(path.join(skillDir, "SKILL.md"), "utf-8");
const fmMatch = skillMd.match(/^---\n([\s\S]*?)\n---/);
const frontmatter = fmMatch ? fmMatch[1] : "";
const body = fmMatch ? skillMd.slice(fmMatch[0].length).trim() : skillMd;

// Validate name field
const nameMatch = frontmatter.match(/^name:\s*(.+)$/m);
const name = nameMatch ? nameMatch[1].trim() : "";
const nameErrors = [];
if (name.length < 1 || name.length > 64) nameErrors.push("Name must be 1-64 characters");
if (/[^a-z0-9-]/.test(name)) nameErrors.push("Name must be lowercase alphanumeric + hyphens only");
if (/^-|-$/.test(name)) nameErrors.push("Name must not start or end with hyphen");
if (/--/.test(name)) nameErrors.push("Name must not contain consecutive hyphens");
if (name !== path.basename(skillDir)) nameErrors.push("Name must match directory name");

const metrics = {
  frontmatterTokens: Math.ceil(frontmatter.length / 4),
  bodyLines: body.split("\n").length,
  bodyTokens: Math.ceil(body.length / 4),
};

const warnings = [];
if (metrics.frontmatterTokens >= 100)
  warnings.push("Frontmatter exceeds 100 token guideline");
if (metrics.bodyLines >= 160)
  warnings.push("Body exceeds 160 line guideline");
if (metrics.bodyLines >= 500)
  warnings.push("Body exceeds 500 line spec limit - split into reference files");
if (metrics.bodyTokens >= 5000)
  warnings.push("Body exceeds 5000 token spec guideline");

console.log("Name validation:", nameErrors.length ? nameErrors : "PASS");
console.log("Size metrics:", metrics);
console.log(warnings.length ? "Warnings: " + warnings.join(", ") : "All size checks passed");
```

## Spec Compliance Constraints

These constraints prevent common mistakes when generating skills. Every generated skill MUST pass all of these checks:

Constraints {
  // Structure: skills are DIRECTORIES, not standalone files
  NEVER create a standalone .mdc or .md file as a skill - always create a directory with SKILL.md inside
  The output MUST be `$projectRoot/aidd-custom/${skillName}/SKILL.md` - not a flat file
  The file MUST be named exactly `SKILL.md` (uppercase) - not skill.md, not ${name}.mdc

  // Frontmatter: use AgentSkills.io fields, NOT aidd .mdc fields
  Frontmatter MUST include `name` and `description` as required fields
  NEVER use `alwaysApply`, `globs`, or other non-spec frontmatter fields in generated skills
  The `name` field MUST be lowercase alphanumeric + hyphens only (a-z, 0-9, -)
  The `name` field MUST match the parent directory name exactly
  The `name` field MUST NOT start or end with a hyphen
  The `name` field MUST NOT contain consecutive hyphens (--)
  The `name` field MUST be 1-64 characters
  The `description` field MUST be 1-1024 characters and describe both what the skill does AND when to use it

  // Size: respect progressive disclosure thresholds
  Frontmatter metadata MUST stay under ~100 tokens
  SKILL.md body SHOULD stay under 160 lines and MUST stay under 500 lines
  SKILL.md body SHOULD stay under 5000 tokens
  If content exceeds limits, split into references/ directory files

  // Content quality
  The body MUST use plain Markdown - not SudoLang (SudoLang is for .mdc rules, not SKILL.md files)
  Include recommended sections: when to use, step-by-step instructions, examples, edge cases
  Keep the skill focused on a single responsibility

  // Validation: always validate before reporting success
  ALWAYS run the symbolic JavaScript validator after creating the skill
  ALWAYS run `skills-ref validate` if available
  ALWAYS report size metrics and any warnings to the user
}

## Example SKILL.md

```markdown
---
name: format-code
description: Format source code files according to project style guides. Use when code needs formatting, linting fixes, or style consistency checks.
metadata:
  author: my-org
  version: "1.0"
---

# Format Code

Format source code according to project conventions and style guides.

## When to use

Use this skill when code needs formatting, style fixes, or consistency checks.

## Steps

1. Detect the project's formatter configuration
2. Identify files that need formatting
3. Apply formatting rules
4. Report changes made

## Edge cases

- If no formatter config exists, ask the user which style to use
- For mixed-language projects, apply per-language formatters
```

Commands {
  /create-skill - create a new agent skill following the AgentSkills.io specification
}
