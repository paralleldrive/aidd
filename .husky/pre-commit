# Generate index.md files for ai/ folders
node bin/aidd.js --index "$(git rev-parse --show-toplevel)"

# Stage any updated index.md files
git add 'ai/**/index.md' 2>/dev/null || true

# Generate ToC for README.md
npm run toc

# Stage updated README.md if ToC was regenerated
git add README.md 2>/dev/null || true

# E2E tests are intentionally excluded here â€” they run real npm installs and
# can take up to 180 s, which exceeds the release pipeline's hook timeout.
# AI agents should run `npm run test:e2e` manually before committing.
npm run test:unit
